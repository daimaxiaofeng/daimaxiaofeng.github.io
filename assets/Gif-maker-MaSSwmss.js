import{e as R}from"./index-wdkclFWO.js";/* empty css                     *//* empty css               *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                        */import{_ as S}from"./ContentWrap.vue_vue_type_script_setup_true_lang-pq9zo6L8.js";import{l as u,m as $,n as w,d as m,p as O,q as D,r as N,s as L}from"./element-plus-pezXwVo7.js";import{l as q,J as k,r as p,m as c,W as h,R as t,O as l,u as e,p as V,a7 as E,P as j,V as g,q as C}from"./vue-chunks-Emfp7Yk5.js";/* empty css                */const G="/assets/wangjingze-h4Z44YDa.gif",J="/assets/dagong-RynpwaFY.gif",T="/assets/sorry-CwDCnFBc.gif",Y="/assets/kongming-Uum9QkRt.gif",P=C("br",null,null,-1),Q=C("br",null,null,-1),se=q({__name:"Gif-maker",setup(W){const U=k({wangjingze:G,dagong:J,sorry:T,kongming:Y}),B=()=>U[o.tpl],y=p([{value:"wangjingze",label:"王境泽真香",placeholders:["我就是饿死","死外边 从这跳下去","也不会吃你们一点东西","真香"]},{value:"dagong",label:"打工是不可能打工的",placeholders:["没有钱啊 肯定要做的啊","不做的话没有钱用","那你不会去打工啊","有手有脚的","打工是不可能打工的","这辈子不可能打工的"]},{value:"sorry",label:"有钱是真的能为所欲为",placeholders:["好啊","别说我是一等良民","就算你们真的想要诬告我","我有的是钱找律师帮我打官司","我想我根本不用坐牢","你别以为有钱了不起啊","sorry 有钱是真的能为所欲为","不过我相信你不会明白这种感觉","不明白 不明白"]},{value:"kongming",label:"孔明",placeholders:["没想到","竟说出如此粗鄙之语"]}]),o=k({tpl:"wangjingze",sentences:[]}),F=k({tpl:"wangjingze",sentences:[]}),f=()=>y.value.find(s=>s.value===o.tpl)||{placeholders:[]},d=p(!1),v=p(""),_=p(!1),x=()=>{_.value=!0;const s={};for(let a=0;a<f().placeholders.length;a++){const i=o.sentences[a];if(i)s[`${a}`]=i;else{const b=f().placeholders[a];s[`${a}`]=b}}const r="http://8.142.120.167/api/gif-maker/make/"+o.tpl,n=JSON.stringify(s);R.post(r,n,{responseType:"blob"}).then(a=>{const i=new Blob([a.data],{type:"image/gif"}),b=URL.createObjectURL(i);v.value=b,d.value=!0}).catch(a=>{}).finally(()=>{_.value=!1})},z=()=>{o.sentences=[...F.sentences]},I=()=>{const s=document.createElement("a");s.href=v.value,s.download=`${o.tpl}.gif`,s.click()};return(s,r)=>(c(),h(e(S),{title:"GIF 表情包制作",message:"选择模板，填入台词，即可制作。"},{default:t(()=>[l(e(O),{model:o,"label-width":"120px"},{default:t(()=>[l(e(u),{label:"模板"},{default:t(()=>[l(e($),{modelValue:o.tpl,"onUpdate:modelValue":r[0]||(r[0]=n=>o.tpl=n),placeholder:"选择表情包模板"},{default:t(()=>[(c(!0),V(j,null,E(y.value,n=>(c(),h(e(N),{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(e(u),null,{default:t(()=>[l(e(w),{style:{width:"300px"},src:B(),fit:"contain"},null,8,["src"])]),_:1}),P,(c(!0),V(j,null,E(f().placeholders,(n,a)=>(c(),h(e(u),{label:`第 ${a+1} 句`,key:a},{default:t(()=>[l(e(L),{modelValue:o.sentences[a],"onUpdate:modelValue":i=>o.sentences[a]=i,placeholder:n},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]))),128)),l(e(u),null,{default:t(()=>[l(e(m),{type:"primary",loading:_.value,onClick:x},{default:t(()=>[g("制作")]),_:1},8,["loading"]),l(e(m),{onClick:z},{default:t(()=>[g("重置")]),_:1})]),_:1})]),_:1},8,["model"]),l(e(D),{title:"制作成功",modelValue:d.value,"onUpdate:modelValue":r[2]||(r[2]=n=>d.value=n),class:"custom-dialog"},{default:t(()=>[l(e(u),null,{default:t(()=>[l(e(w),{style:{width:"300px"},src:v.value,fit:"contain"},null,8,["src"])]),_:1}),Q,l(e(u),null,{default:t(()=>[l(e(m),{type:"primary",onClick:I},{default:t(()=>[g("下载")]),_:1}),l(e(m),{onClick:r[1]||(r[1]=n=>d.value=!1)},{default:t(()=>[g("取消")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{se as default};
